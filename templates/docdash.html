<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<!-- My CSS -->
	<link rel="stylesheet" href="/static/dash.css">
	<link rel="icon" href="/static/icon4.png" type="image/png">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<!-- Font Awesome CSS -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-YWznr3x2waj/PWvBVqEb78FuEss+W+ShvUTzYzYtPus1SmcmU/+3vJQzLn3cecynd~" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<title>Doctor Dashboard</title>
	<style>
		/* General table styling */
		#appointments-table table {
			width: 100%;
			border-collapse: collapse;
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		#appointments-table th,
		#appointments-table td {
			padding: 10px;
			text-align: center;
		}

		/* Header styling */
		#appointments-table th {
			background-color: #c32d52;
			color: white;
		}

		/* Alternating row colors */
		/* #appointments-table tbody tr:nth-child(even) {
			background-color: rgba(255, 255, 255, 0.8);
		} */
		#appointments-table tbody tr:nth-child(even) {
    		background-color: rgba(255, 255, 255, 0.8);
		}
		/* Hover effect */
		#appointments-table tbody tr:hover {
			background-color: #f7d4dc;
		}

		/* Button styling */
		#appointments-table .optionss form {
			display: inline-block;
			margin-right: 5px;
		}

		#appointments-table .accept,
		#appointments-table .reject {
			padding: 8px 16px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			transition: all 0.3s ease;
		}

		/* Accept button */
		#appointments-table .accept {
			background-color: #4caf50;
			color: white;
		}

		#appointments-table .accept:hover {
			background-color: #45a049;
		}

		/* Reject button */
		#appointments-table .reject {
			background-color: #ff5252;
			color: white;
		}
		#appointments-table tbody tr:nth-child(even) {
			background-color: #f9f9f9;
		}


		#appointments-table .reject:hover {
			background-color: #e04848;
		}

		/* Responsive column widths */
		#appointments-table th:nth-child(1),
		#appointments-table td:nth-child(1) {
			width: 12%;
			/* Adjust the width as needed */
		}

		#appointments-table th:nth-child(4),
		#appointments-table td:nth-child(4) {
			width: 15%;
			/* Adjust the width as needed */
		}

		#appointments-table th:nth-child(2),
		#appointments-table td:nth-child(2) {
			width: 8.9%;
			/* Adjust the width as needed */
		}

		#appointments-table th:nth-child(3),
		#appointments-table td:nth-child(3) {
			width: 21.3%;
			/* Adjust the width as needed */
		}

		#appointments-table th:nth-child(7),
		#appointments-table td:nth-child(7) {
			width: 15%;
			/* Adjust the width as needed */
		}


		/* General table styling */
		#inventory-table table {
			width: 100%;
			border-collapse: collapse;
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			/* Center align table text */
		}

		#inventory-table th,
		#inventory-table td {
			border: none;
			/* Remove border between cells */
			padding: 8px;
		}

		/* Header styling */
		#inventory-table th {
			background-color: #c32d52;
			color: white;
		}

		/* Alternating row colors */
		#inventory-table tbody tr:nth-child(even) {
			background-color: #f9f9f9;
		}

		/* Hover effect */
		#inventory-table tbody tr:hover {
			background-color: #f7d4dc;
		}

		/* Button styling */
		#inventory-table form {
			display: inline-block;
		}

		/* Use button */
		#inventory-table .use-button {
			background-color: #007bff;
			color: white;
			border: none;
			padding: 8px 16px;
			cursor: pointer;
			border-radius: 50px;
			transition: background-color 0.3s ease;
			/* Smooth transition */

		}

		#inventory-table .use-button:hover {
			background-color: #0056b3;
			/* Rounded corners on hover */
		}

		/* Delete button */
		#inventory-table .delete-button {
			background-color: #dc3545;
			color: white;
			border: none;
			padding: 8px 16px;
			cursor: pointer;
			border-radius: 50px;
			transition: background-color 0.3s ease;
			/* Smooth transition */
		}

		#inventory-table .delete-button:hover {
			background-color: #c82333;
			/* Rounded corners on hover */
		}

		/* Quantity input */
		.quantity-input {
			width: 60px;
			padding: 8px;
			border: 1px solid #ccc;
			border-radius: 8px;
			font-size: 16px;
		}

		.quantity-input:focus {
			outline: none;
			border-color: #007bff;
		}

		/* Adjust styling for different states as needed */
		.quantity-input:disabled {
			background-color: #f0f0f0;
			color: #999;
		}

		/* General table styling */
		#rooms-table table {
			width: 100%;
			border-collapse: collapse;
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		#rooms-table th,
		#rooms-table td {
			border: none;
			padding: 8px;
			text-align: center;
			/* Center align table text */
		}

		/* Header styling */
		#rooms-table th {
			background-color: #c32d52;
			color: white;
		}

		/* Alternating row colors */
		#rooms-table tbody tr:nth-child(even) {
			background-color: #f9f9f9;
		}

		/* Hover effect */
		#rooms-table tbody tr:hover {
			background-color: #f7d4dc;
		}

		/* Button styling */
		#rooms-table form {
			display: inline-block;
		}

		/* Occupy button */
		#rooms-table .occupy-button {
			background-color: #4caf50;
			color: white;
			border: none;
			padding: 6px 12px;
			cursor: pointer;
			border-radius: 50px;
			/* Rounded corners */
			transition: background-color 0.3s ease;
			/* Smooth transition */
		}

		#rooms-table .occupy-button:hover {
			background-color: #45a049;
		}

		/* Unoccupy button */
		#rooms-table .unoccupy-button {
			background-color: #ff5252;
			color: white;
			border: none;
			padding: 6px 12px;
			cursor: pointer;
			border-radius: 50px;
			/* Rounded corners */
			transition: background-color 0.3s ease;
			/* Smooth transition */
		}

		#rooms-table .unoccupy-button:hover {
			background-color: #e04848;
		}

		/* Adjust styling for different states as needed */
		#rooms-table .quantity-input {
			width: 60px;
			padding: 8px;
			border: 1px solid #ccc;
			border-radius: 8px;
			font-size: 16px;
		}

		#rooms-table .quantity-input:focus {
			outline: none;
			border-color: #007bff;
		}

		#rooms-table .quantity-input:disabled {
			background-color: #f0f0f0;
			color: #999;
		}



		table,
		td,
		th,
		tr {
			text-align: center;
		}




		.padding {
			padding: 3rem !important
		}

		.user-card-full {
			overflow: hidden;
		}

		.card {
			border-radius: 5px;
			-webkit-box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
			box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
			border: none;
			margin-bottom: 30px;
		}

		.m-r-0 {
			margin-right: 0px;
		}

		.m-l-0 {
			margin-left: 0px;
		}

		.user-card-full .user-profile {
			border-radius: 5px 0 0 5px;
		}

		.bg-c-lite-green {
			background: -webkit-gradient(linear, left top, right top, from(#f29263), to(#ee5a6f));
			background: linear-gradient(to right, #ee5a6f, #f29263);
		}

		.user-profile {
			padding: 20px 0;
		}

		.card-block {
			padding: 1.25rem;
		}

		.m-b-25 {
			margin-bottom: 25px;
		}

		.img-radius {
			border-radius: 5px;
		}



		h6 {
			font-size: 14px;
		}

		.card .card-block p {
			line-height: 25px;
		}

		@media only screen and (min-width: 1400px) {
			p {
				font-size: 14px;
			}
		}

		.card-block {
			padding: 1.25rem;
		}

		.b-b-default {
			border-bottom: 1px solid #e0e0e0;
		}

		.m-b-20 {
			margin-bottom: 20px;
		}

		.p-b-5 {
			padding-bottom: 5px !important;
		}

		.card .card-block p {
			line-height: 25px;
		}

		.m-b-10 {
			margin-bottom: 10px;
		}

		.text-muted {
			color: #919aa3 !important;
		}

		.b-b-default {
			border-bottom: 1px solid #e0e0e0;
		}

		.f-w-600 {
			font-weight: 600;
		}

		.m-b-20 {
			margin-bottom: 20px;
		}

		.m-t-40 {
			margin-top: 20px;
		}

		.p-b-5 {
			padding-bottom: 5px !important;
		}

		.m-b-10 {
			margin-bottom: 10px;
		}

		.m-t-40 {
			margin-top: 20px;
		}

		.user-card-full .social-link li {
			display: inline-block;
		}

		.user-card-full .social-link li a {
			font-size: 20px;
			margin: 0 10px 0 0;
			-webkit-transition: all 0.3s ease-in-out;
			transition: all 0.3s ease-in-out;
		}

		#profile-table {
			display: none;
			background: linear-gradient(90deg, hsla(177, 87%, 79%, 1) 0%, hsla(235, 89%, 70%, 1) 100%);
			padding: 20px;
			/* Add padding for better visibility */
			border-radius: 20px;
			/* Add border-radius for a smoother appearance */
		}


		.card {
			background: rgba(255, 255, 255, 0.3);
			backdrop-filter: blur(10px);
			/* Apply the blur effect */
			border-radius: 20px;
			margin-top: 30px;
			animation: fadeInUp 1s ease;
			/* Add animation */
		}

		.profile-img {
			border-radius: 50%;
			width: 150px;
			height: 150px;
			object-fit: cover;
			margin-top: -75px;
			border: 5px solid rgba(255, 255, 255, 0.5);
		}

		.card-header {
			background-color: transparent;
			border-bottom: none;
		}

		/* Optional CSS styles */
		.card-body {
			color: black;
		}

		/* Animation keyframes */
		@keyframes fadeInUp {
			0% {
				opacity: 0;
				transform: translateY(20px);
			}

			100% {
				opacity: 1;
				transform: translateY(0);
			}
		}

		newbody {
			background: linear-gradient(90deg, hsla(57, 98%, 50%, 1) 0%, hsla(325, 69%, 56%, 1) 100%);
			background-size: cover;
			/* background-blur: 10px; */
		}

		.toast-container {
			position: fixed;
			top: 1rem;
			right: 1rem;
			z-index: 1000;
			/* Ensure it's above other content */
			width: 300px;
			/* Adjust width as needed */
		}

		/* Styles for the toast */
		.toast {
			display: block;
			background-color: #fff;
			border: 1px solid #28a745;
			/* Success color */
			border-radius: 0.25rem;
			box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
			margin-bottom: 0.5rem;
		}

		/* Styles for the toast header */
		.toast-header {
			background-color: #28a745;
			/* Success color */
			color: #fff;
			padding: 0.5rem;
			border-bottom: 1px solid rgba(0, 0, 0, 0.125);
			border-top-left-radius: 0.25rem;
			border-top-right-radius: 0.25rem;
		}

		/* Styles for the toast body */
		.toast-body {
			padding: 0.75rem;
			color: #000;
			/* Adjust text color as needed */
		}

		#sidebar a {
			text-decoration: none;
		}
	</style>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
		integrity="sha512-odq3m15Ea7yBvW3XO8v1vZTnHeF5y8N/fBq94BnWn8Y1zPzJ1A8UJ1VizcDmsF+scQ0l1LmTFnsMmvBN+8FlpA=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bx-user'></i>
			<span class="text">{{ user_full_name }}</span>
		</a>
		<ul class="side-menu top">
			<li>
				<a href="/templates/docdash.html">
					<i class='bx bx-calendar'></i>
					<span class="text">Appointment</span>
				</a>
			</li>
			<li>
				<a href="/templates/docdash.html">
					<i class='bx bx-box'></i>
					<span class="text">Inventory</span>
				</a>
			</li>
			<li>
				<a href="/templates/docdash.html">
					<i class='bx bx-home-circle'></i>
					<span class="text">Room</span>
				</a>
			</li>
			<li>
				<a href="/templates/docdash.html">
					<i class='bx bx-id-card'></i>
					<span class="text">Profile</span>
				</a>
			</li>
			<!-- <li>
				<a href="#">
					<i class='bx bxs-group' ></i>
					<span class="text">Profile</span>
				</a>
			</li> -->
			<!-- <li>
				<a href="#">
					<i class='bx bx-plus' ></i>
					<span class="text">Add new Patient</span>
				</a>
			</li> -->
		</ul>
		<br><br><br><br><br><br><br><br><br><br>
		<ul class="side-menu">
			<li>
				<a href="#">
					<i class='bx bx-cog'></i>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="{% url 'logout' %}" class="logout">
					<i class='bx bx-log-out'></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->

	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
				</div>
			</form>
			<!-- <input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label> -->
			<!-- <a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a> -->
			<a href="#" class="profile">
				<img src="{{ avatar_url }}">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- Alert section -->
		{% if email_sent %}
		<div class="alert alert-success" id="alert" role="alert">
			Appointment acceptance email sent successfully!
		</div>
		{% endif %}
		{% if reject_sent %}
		<div class="alert alert-reject" id="alert" role="alert">
			Appointment Rejected email sent successfully!
		</div>
		{% endif %}
		<!-- Alert section -->
		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left" style="width: 100%;">
					<!-- <iframe id="hidden-iframe" name="hidden-iframe" style="display: none;"></iframe> -->
					<div id="appointments-table" style="display: none;">
						<!-- Your appointments table content -->
						<div class="todo">
							<table>
								<thead>
									<tr>
										<th>Doctor</th>
										<th>Date</th>
										<th>Time</th>
										<th>Name</th>
										<th>Email</th>
										<th>Phone</th>
										<th>Message</th>
										<th>Option</th>

									</tr>
								</thead>
								<tbody>
									{% for appointment in data %}
									<tr>
										<td>
											{{ appointment.doctor.get_full_name }}
										</td>
										<td> {{ appointment.date }}</td>

										<td style="width: fit-content;"> {{ appointment.start_time }} -
											{{appointment.end_time}}</td>
										<td>{{ appointment.name }}</td>
										<td> {{ appointment.email }}</td>
										<td>{{ appointment.phone }}</td>
										<td>{{ appointment.message }}</td>
										<td class="optionss">
											<form method="POST" action="/send-acceptance-email/#appointments-table">
												{% csrf_token %}

												<input type="hidden" name="appointment_id" value="{{ appointment.id }}">
												<input type="hidden" name="appointments-table" ]>
												<button type="submit" class="accept">Accept</button>
											</form>
											<form method="POST" action="/reject-appointment/#appointments-table">
												{% csrf_token %}
												<input type="hidden" name="appointment_id" value="{{ appointment.id }}">
												<button type="submit" class="reject">Reject</button>
											</form>
										</td>

									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
					<div id="inventory-table" style="display: none; margin-left: 2px;">
						<table style="font-size: 13px;"> <!-- Increase the font size of the entire table -->
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
									<th>Quantity</th>
									<th>Date Added</th>
									<th>Unit Price</th>
									<th>Status</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<!-- Iterate over products -->
								{% for product in products %}
								<tr>
									<td style="width: 15%;">{{ product.name }}</td>
									<td style="text-align: justify; width: 29%;">{{ product.description }}</td>
									<td>{{ product.quantity }}</td>
									<td>{{ product.date_added }}</td>
									<td>{{ product.price }}</td>
									<td>
										{% if product.get_status == 'IN_STOCK' %}
											<span class="badge rounded-pill bg-success" style="color: blackb; padding: 10px;">In Stock</span> <!-- Increase the padding -->
										{% elif product.get_status == 'OUT_OF_STOCK' %}
											<span class="badge rounded-pill bg-danger" style="color: black; padding: 10px;">Out of Stock</span> <!-- Increase the padding -->
										{% else %}
											<span class="badge rounded-pill bg-warning text-dark" style="color: rgb(255, 136, 0); padding: 10px;">Running Out</span> <!-- Increase the padding -->
										{% endif %}
									</td>
									<td style="text-align: justify;">
										<form id="useProductForm" method="post" action="{% url 'use_product' product.id %}#inventory-table">
											{% csrf_token %}
											<label for="useQuantity">Use Quantity:</label>
											<div style="display: flex; align-items: center;">
												<input type="number" id="useQuantity" name="useQuantity" min="1" class="form-control" style="width: 60px;">
												<div style="margin-left: 10px;">
													<button type="submit" class="btn btn-primary" style="font-size: 12px;">Use</button>
												</div>
											</div>
											
										</form>
										<!-- <form method="get" id="editProductForm" data-edit-url="{% url 'edit_product' product.id %}">
											{% csrf_token %}
											<div style="margin-left: 5px;">
												<button type="button" class="btn btn-warning btn-sm edit-product-btn" style="font-size: 12px;" data-bs-toggle="modal" data-bs-target="#editProductModal" data-product-id="{{ product.id }}">Edit</button>
											</div>
										</form> -->
										<a href="/edit_product/{{ product.id }}/#inventory-table" class="btn btn-warning btn-sm edit-product-btn" style="font-size: 12px;" data-bs-toggle="modal" data-bs-target="#editProductModal" data-product-id="{{ product.id }}">Edit</a>
										
										
										<div class="modal fade" id="editProductModal" tabindex="-1" role="dialog" aria-labelledby="editProductModalLabel" aria-hidden="true">
											<div class="modal-dialog modal-dialog-centered" role="document">
												<div class="modal-content">
													<div class="modal-header">
														<h5 class="modal-title" id="editProductModalLabel">Edit Product</h5>
														<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
															<span aria-hidden="true">&times;</span>
														</button>
													</div>
													<div class="modal-body">
														<form method="post" action="{request.path}" id="editProductFormInternal">
															{% csrf_token %}
															<input type="hidden" name="product_id" value="{{ product.id }}">
															<div class="mb-3">
																<label for="productName" class="form-label">Name:</label>
																<input type="text" class="form-control" id="productName" name="name" value="{{ product.name }}" style="width: 206%;">
															</div>
															<div class="mb-3">
																<label for="productDescription" class="form-label">Description:</label>
																<textarea class="form-control" id="productDescription" name="description" rows="3"  style="width: 206%;">{{ product.description }}</textarea>
															</div>
															<div class="mb-3">
																<label for="productQuantity" class="form-label">Quantity:</label>
																<input type="number" class="form-control" id="productQuantity" name="quantity" value="{{ product.quantity }}" min="0">
															</div>
															<div class="mb-3">
																<label for="productPrice" class="form-label">Price:</label>
																<input type="number" step="1" class="form-control" id="productPrice" name="price" value="{{ product.price }}">
															</div>
															<!-- 
															<div class="mb-3">
																<label for="productImage" class="form-label">Image (Optional):</label>
																<input type="file" class="form-control" id="productImage" name="image">
																<small class="text-muted">Leave blank to keep the current image.</small>
															</div>
															-->
														</form>
													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
														<button type="submit" form="editProductFormInternal" class="btn btn-primary">Save changes</button>
													</div>
												</div>
											</div>
										</div>
										
										
										<!-- Delete button -->
										<form action="{% url 'delete_product' product.id %}#inventory-table" method="post" class="delete-form">
											{% csrf_token %}
											<input type="submit" value="Delete" class="btn btn-danger" style="font-size: 11px;" onclick="return confirm('Are you sure you want to delete this product?')" style="font-size: 11px;"> <!-- Increase the font size -->
										</form>
									</td>
								</tr>
								{% endfor %}	
							</tbody>
						</table>
					</div>
					

					<div id="rooms-table" style="display: none;">
						<h2>Vacant Rooms</h2>
						<table>
							<thead>
								<tr>
									<th>Room Number</th>
									<th>Room Type</th>

									<th>Floor</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for room in available_rooms %}
								<tr>
									<td class="room-number">{{ room.number }}</td>
									<td>{{ room.room_type }}</td>

									<td>{{ room.floor }}</td>
									<td>
										<form method="post" action="{% url 'occupy_room' room.id %}#rooms-table">
											{% csrf_token %}
											<input type="hidden" name="action" value="occupy">
											<button type="submit" class="occupy-button">Occupy</button>
										</form>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>

						<table style="text-align: center;">
							<h2 style="margin-top: 30px;">Occupied Rooms</h2>
							<thead>
								<tr>
									<th>Room Number</th>
									<th>Room Type</th>

									<th>Floor</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for room in unavailable_rooms %}
								<tr>
									<td class="room-number">{{ room.number }}</td>
									<td>{{ room.room_type }}</td>
									<td>{{ room.floor }}</td>
									<td>
										<form method="post" action="{% url 'unoccupy_room' room.id %}#rooms-table">
											{% csrf_token %}
											<input type="hidden" name="action" value="unoccupy">
											<button type="submit" class="unoccupy-button">Vacate</button>
										</form>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>

					<div id="profile-table" style="display: none; border: none;" class="newbody">

						<div class="container mt-5 newbody ">
							<div class="row justify-content-center">
								<div class="col-md-8">
									<div class="card">
										<div class="card-header text-center">
											<img src="{{ avatar_url }}" alt="User-Profile-Image" class="profile-img">
											<h3 class="mt-3">{{ request.user.get_full_name }}</h3>

										</div>
										<div class="card-body">
											{% if department %}
											<p><i class="fas fa-building"></i> Department: {{ department|title }}</p>
											{% endif %}

											<p><i class="fas fa-envelope"></i>&nbsp; Email-address:
												{{ request.user.email }}</p>
											<p><i class="fas fa-phone"></i>&nbsp; Phone:
												{{ request.user.profile.phone_number }}</p>
											<p><i class="fas fa-venus-mars"></i>&nbsp; Gender:
												{{ request.user.profile.get_gender_display|title }}</p>
											<p><i class="fas fa-calendar-alt"></i>&nbsp; Date of Birth:
												{{ request.user.profile.date_of_birth }}</p>
											<p><i class="fas fa-map-marker-alt"></i> Address:
												{{ request.user.profile.address }}</p>
											<p><i class="fas fa-graduation-cap"></i> Medical School:
												{{ request.user.profile.medical_school  }}</p>
											<p><i class="fas fa-stethoscope"></i> License Number:
												{{ request.user.profile.license_number }}</p>

											<button type="button" class="btn btn-primary" id="editProfileBtn">
												Edit Profile
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Modal for editing profile -->
				<div class="modal fade" id="editProfileModal" tabindex="-1" role="dialog"
					aria-labelledby="editProfileModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
								<button type="button" class="closex" data-bs-dismiss="modal" aria-label="Close" ><span aria-hidden="true">&times;</span></button>
							</div>
							<div class="modal-body">
								<!-- Form for editing profile -->
								<form id="editProfileForm" action="{% url 'edit_profile' %}#profile-section"
									method="POST">
									{% csrf_token %}
									<!-- Input fields for each editable field -->
									<div class="form-group">
										<label for="editEmail">Email-address:</label>
										<input type="email" class="form-control" id="editEmail" name="email"
											value="{{ request.user.email }}">
									</div>
									<div class="form-group">
										<label for="editPhoneNumber">Phone Number:</label>
										<input type="text" class="form-control" id="editPhoneNumber" name="phoneNumber"
											value="{{ request.user.profile.phone_number }}">
									</div>
									<div class="form-group">
										<label for="editGender">Gender:</label>
										<select class="form-control" id="editGender" name="gender">
											<option value="male" {% if request.user.profile.gender == 'male' %}selected{% endif %}>Male</option>
											<option value="female" {% if request.user.profile.gender == 'female' %}selected{% endif %}>Female</option>
											<option value="other" {% if request.user.profile.gender == 'other' %}selected{% endif %}>Other</option>

											<!-- Add options for other genders if needed -->
										</select>
									</div>
									<div class="form-group">
										<label for="editDateOfBirth">Date of Birth:</label>
										<input type="date" class="form-control" id="editDateOfBirth" name="dateOfBirth"
											value="{{ request.user.profile.date_of_birth|date:'Y-m-d' }}">
									</div>
									<div class="form-group">
										<label for="editAddress">Address:</label>
										<input type="text" class="form-control" id="editAddress" name="address"
											value="{{ request.user.profile.address }}">
									</div>
									<div class="form-group">
										<label for="editMedicalSchool">Medical School:</label>
										<input type="text" class="form-control" id="editMedicalSchool"
											name="medicalSchool" value="{{ request.user.profile.medical_school }}">
									</div>
									<div class="form-group">
										<label for="editLicenseNumber">License Number:</label>
										<input type="text" class="form-control" id="editLicenseNumber"
											name="licenseNumber" value="{{ request.user.profile.license_number }}">
									</div>
								</form>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								<button type="button" class="btn btn-primary" id="saveChangesBtn"
									onclick="showToast">Save Changes</button>
							</div>
						</div>
					</div>
				</div>


				<!-- Modal for editing product -->
			
		</main>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdn.lordicon.com/lordicon.js"></script>
		<script src="../static/script.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
$(document).ready(function() {
    $('.edit-product-btn').click(function() {
        var productId = $(this).data('product-id');
		console.log(productId) // Get ID from data attribute (add class to your edit button)
        $('#editProductModal').modal('show');
    });	
});
document.addEventListener('DOMContentLoaded', function() {
    var editButtons = document.querySelectorAll('.edit-product-btn');

    editButtons.forEach(function(button) {
        button.addEventListener('click', function(event) {
            var productId = event.target.getAttribute('product-id');
            var productDetails = getProductDetails(productId);
            if (productDetails) {
                document.getElementById('productName').value = productDetails.name;
                document.getElementById('productDescription').value = productDetails.description;
                document.getElementById('productQuantity').value = productDetails.quantity;
                document.getElementById('productPrice').value = productDetails.price;
                var modal = new bootstrap.Modal(document.getElementById('editProductModal'));
                modal.show();
            }
        });
    });

	function getProductDetails(productId) {
    // Call your function to fetch product details asynchronously
    return fetchProductDetails(productId)
        .then(function(productDetails) {
            return productDetails; // Return the fetched product details
        })
        .catch(function(error) {
            console.error('Error fetching product details:', error);
            return null; // Return null if there's an error
        });
}

});

</script>
		<script>
		
			document.addEventListener('DOMContentLoaded', function() {
				// Function to open the modal
				function openModal() {
					$('#editProfileModal').modal('show');
				}
				document.querySelector('#editProfileBtn').addEventListener('click', openModal);
				// Event listener for save changes button click
				document.querySelector('#saveChangesBtn').addEventListener('click', function() {
					document.getElementById("editProfileForm").submit();
				});
			});
			// Get the alert element by its ID
		
			// Set a timeout to call the hideAlert function after 10 seconds
			
			// Get references to the sidebar links
			const appointmentsLink = document.querySelector('#sidebar ul.side-menu li:nth-child(1) a');
			const inventoryLink = document.querySelector('#sidebar ul.side-menu li:nth-child(2) a');
			const roomsLink = document.querySelector('#sidebar ul.side-menu li:nth-child(3) a');
			const profile = document.querySelector('#sidebar ul.side-menu li:nth-child(4) a');
			// Get references to the tables
			const appointmentsTable = document.getElementById('appointments-table');
			const inventoryTable = document.getElementById('inventory-table');
			const roomsTable = document.getElementById('rooms-table');
			const profiletable = document.getElementById('profile-table');
			// Add event listeners to the sidebar links
			appointmentsLink.addEventListener('click', (event) => {
				// Prevent the default action of the link
				event.preventDefault();
				// Show appointments table and hide others
				appointmentsTable.style.display = 'block';
				inventoryTable.style.display = 'none';
				roomsTable.style.display = 'none';
				profiletable.style.display = 'none';
			});
			inventoryLink.addEventListener('click', (event) => {
				// Prevent the default action of the link
				event.preventDefault();
				// Show inventory table and hide others
				appointmentsTable.style.display = 'none';
				inventoryTable.style.display = 'block';
				roomsTable.style.display = 'none';
				profiletable.style.display = 'none';
			});
			roomsLink.addEventListener('click', (event) => { // Add this block
				// Prevent the default action of the link
				event.preventDefault();
				// Show rooms table and hide others
				appointmentsTable.style.display = 'none';
				inventoryTable.style.display = 'none';
				roomsTable.style.display = 'block';
				profiletable.style.display = 'none';
			});
			profile.addEventListener('click', (event) => {
				// Prevent the default action of the link
				event.preventDefault();
				// Show appointments table and hide others
				profiletable.style.display = 'block';
				inventoryTable.style.display = 'none';
				roomsTable.style.display = 'none';
				appointmentsTable.style.display = 'none';
			});
			var currentUrl = window.location.href;
			// Check if the URL contains a fragment
			if (currentUrl.includes('#appointments-table')) {
				// Show the appointments table section
				var appointmentstable = document.getElementById('appointments-table');
				appointmentstable.style.display = 'block';
			} else if (currentUrl.includes('#inventory-table')) {
				// Show the inventory table section
				var inventorytable = document.getElementById('inventory-table');
				inventorytable.style.display = 'block';
			} else if (currentUrl.includes('#rooms-table')) {
				// Show the rooms table section
				var roomstable = document.getElementById('rooms-table');
				roomstable.style.display = 'block';
			} else if (currentUrl.includes('#profile-section')) {
				// Show the profile section
				var profileSection = document.getElementById('profile-table');
				profileSection.style.display = 'block';
			}
		</script>
		<script>
			// Function to handle form submission
			function submitForm(event) {
				// Prevent the default form submission behavior
				event.preventDefault();
				// Get the form element
				var form = document.getElementById('acceptance-form');
				// Submit the form using JavaScript
				form.submit();
			}

			function toggleRangeBox(button) {
				var rangeBox = button.parentNode.querySelector('#useRange');
				var confirmButton = button.parentNode.querySelector('[type="submit"]');
				if (rangeBox.style.display === 'none') {
					rangeBox.style.display = 'block';
					confirmButton.style.display = 'block';
					button.textContent = 'Cancel';
				} else {
					rangeBox.style.display = 'none';
					confirmButton.style.display = 'none';
					button.textContent = 'Use';
				}
			}

			function updateRangeValue(range) {
				var valueBox = range.parentNode.querySelector('#useQuantity');
				valueBox.value = range.value;
			}

			function showToast(message) {
				// Create toast container if it doesn't exist
				var toastContainer = document.querySelector('.toast-container');
				if (!toastContainer) {
					toastContainer = document.createElement('div');
					toastContainer.className = 'toast-container';
					document.body.appendChild(toastContainer);
				}
				// Create toast element
				var toast = document.createElement('div');
				toast.className = 'toast';
				// Create toast header
				var header = document.createElement('div');
				header.className = 'toast-header';
				header.textContent = 'Notification';
				// Create close button
				var closeButton = document.createElement('button');
				closeButton.type = 'button';
				closeButton.className = 'close';
				closeButton.innerHTML = '&times;';
				closeButton.setAttribute('aria-label', 'Close');
				closeButton.addEventListener('click', function() {
					toastContainer.removeChild(toast);
				});
				// Append close button to header
				header.appendChild(closeButton);
				// Create toast body
				var body = document.createElement('div');
				body.className = 'toast-body';
				body.textContent = message;
				// Append header and body to toast
				toast.appendChild(header);
				toast.appendChild(body);
				// Append toast to container
				toastContainer.appendChild(toast);
				// Auto-dismiss toast after 5 seconds
				setTimeout(function() {
					toastContainer.removeChild(toast);
				}, 5000);
			}
			// Example usage
			showToast('This is a toast notification.');
	
			document.addEventListener('DOMContentLoaded', function () {
    const editProductForm = document.getElementById('editProductForm');
    const editProductModal = new bootstrap.Modal(document.getElementById('editProductModal'));

    editProductForm.addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent default form submission
        const productId = this.getAttribute('data-product-id');
        fetch(this.getAttribute('data-edit-url'), {
            method: 'GET',
        })
        .then(response => response.json())
        .then(data => {
            // Populate modal fields with product data
            document.getElementById('productName').value = data.name;
            document.getElementById('productDescription').value = data.description;
            document.getElementById('productQuantity').value = data.quantity;
            document.getElementById('productPrice').value = data.price;

            // Show the modal
            editProductModal.show();
        })
        .catch(error => console.error('Error fetching product data:', error));
    });
});


		</script>
</body>

</html>